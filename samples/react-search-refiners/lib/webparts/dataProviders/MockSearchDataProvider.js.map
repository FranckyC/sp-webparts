{"version":3,"sources":["webparts/dataProviders/MockSearchDataProvider.ts"],"names":[],"mappings":"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","file":"webparts/dataProviders/MockSearchDataProvider.js","sourcesContent":["import ISearchDataProvider from \"./ISearchDataProvider\";\r\nimport { ISearchResults, IRefinementFilter, ISearchResult } from \"../models/ISearchResult\";\r\nimport intersection from \"lodash-es/intersection\";\r\nimport clone from \"lodash-es/clone\";\r\n\r\nclass MockSearchDataProvider implements ISearchDataProvider {\r\n\r\n    public selectedProperties: string[];\r\n\r\n    private _itemsCount: number;\r\n\r\n    public get resultsCount(): number { return this._itemsCount; }\r\n    public set resultsCount(value: number) { this._itemsCount = value; }\r\n\r\n    private _searchResults: ISearchResults;\r\n\r\n    public constructor() {\r\n     \r\n        this._searchResults = {\r\n            RelevantResults: [\r\n                {\r\n                    Title: \"Document 1 - Category 1\",\r\n                    Url: \"http://document1.ca\",\r\n                    Created: \"2017-07-22T15:38:54.0000000Z\",\r\n                    RefinementTokenValues: \"ǂǂ446f63756d656e74,ǂǂ45647563617465\",\r\n                    ContentCategory: \"Document\",\r\n                },\r\n                {\r\n                    Title: \"Document 2 - Category 2\",\r\n                    Url: \"http://document2.ca\",\r\n                    Created: \"2017-07-22T15:38:54.0000000Z\",\r\n                    RefinementTokenValues: \"ǂǂ446f63756d656e74,ǂǂ416476697365\",\r\n                    ContentCategory: \"Document\",\r\n                },\r\n                {\r\n                    Title: \"Form 1\",\r\n                    Url: \"http://form1.ca\",\r\n                    Created: \"2017-07-22T15:38:54.0000000Z\",\r\n                    RefinementTokenValues:  \"ǂǂ466f726d\",\r\n                    ContentCategory: \"Form\",              \r\n                },\r\n                {\r\n                    Title: \"Video 1 - Category 1\",\r\n                    Url: \"https://www.youtube.com/watch?v=S93e6UU7y9o\",\r\n                    Created: \"2017-07-22T15:38:54.0000000Z\",\r\n                    RefinementTokenValues: \"ǂǂ566964656f,ǂǂ45647563617465\",\r\n                    ContentCategory: \"Video\",                    \r\n                },\r\n                {\r\n                    Title: \"Video 2 - Category 2\",\r\n                    Url: \"https://www.youtube.com/watch?v=8Nl_dKVQ1O8\",\r\n                    Created: \"2017-07-22T15:38:54.0000000Z\",\r\n                    RefinementTokenValues: \"ǂǂ566964656f,ǂǂ416476697365\",\r\n                    ContentCategory: \"Video\",                                                \r\n                },                                   \r\n            ],\r\n            RefinementResults: [\r\n                {\r\n                    FilterName: \"Type\",\r\n                    Values: [\r\n                        {\r\n                            RefinementCount: 2,\r\n                            RefinementName: \"Document\",\r\n                            RefinementToken: \"ǂǂ446f63756d656e74\",\r\n                            RefinementValue: \"Document\",   \r\n                        },\r\n                        {\r\n                            RefinementCount: 2,\r\n                            RefinementName: \"Video\",\r\n                            RefinementToken: \"ǂǂ566964656f\",\r\n                            RefinementValue: \"Video\",                               \r\n                        },\r\n                        {\r\n                            RefinementCount: 1,\r\n                            RefinementName: \"Form\",\r\n                            RefinementToken: \"ǂǂ466f726d\",\r\n                            RefinementValue: \"Form\",                               \r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    FilterName: \"Theme\",\r\n                    Values: [\r\n                        {\r\n                            RefinementCount: 2,\r\n                            RefinementName: \"Category 1\",\r\n                            RefinementToken: \"ǂǂ45647563617465\",\r\n                            RefinementValue: \"Category 1\",   \r\n                        },\r\n                        {\r\n                            RefinementCount: 2,\r\n                            RefinementName: \"Category 2\",\r\n                            RefinementToken: \"ǂǂ416476697365\",\r\n                            RefinementValue: \"Category 2\",                               \r\n                        },\r\n                    ]\r\n                }\r\n            ],      \r\n            TotalRows: 5,      \r\n        };\r\n    }\r\n\r\n    public search(query: string, refiners?: string, refinementFilters?: IRefinementFilter[], pageNumber?: number): Promise<ISearchResults> {\r\n         \r\n        const p1 = new Promise<ISearchResults>((resolve, reject) => {\r\n\r\n            const filters: string[] = [];\r\n            let searchResults = clone(this._searchResults);\r\n            const filteredResults: ISearchResult[] = [];\r\n            \r\n            if (refinementFilters.length > 0) {\r\n                refinementFilters.map((filter) => {\r\n                    filters.push(filter.Value.RefinementToken);                                                     \r\n                });\r\n                \r\n                searchResults.RelevantResults.map((searchResult) => {\r\n                    const filtered = intersection(filters, searchResult.RefinementTokenValues.split(\",\"));\r\n                    if (filtered.length > 0) {\r\n                        filteredResults.push(searchResult);\r\n                    }\r\n                });\r\n\r\n                searchResults = {\r\n                    RelevantResults: filteredResults,\r\n                    RefinementResults: this._searchResults.RefinementResults,\r\n                    TotalRows: filteredResults.length,\r\n                };\r\n            }\r\n\r\n            // Return only the specified count\r\n            searchResults.RelevantResults = this._paginate(searchResults.RelevantResults, this._itemsCount, pageNumber);\r\n\r\n            // Simulate an async call\r\n            setTimeout(() => {\r\n                resolve(searchResults);\r\n            }, 1000);\r\n        });\r\n\r\n        return p1;\r\n    }\r\n\r\n    private _paginate (array, pageSize: number, pageNumber: number) {\r\n        let basePage = --pageNumber * pageSize;\r\n\r\n        return pageNumber < 0 || pageSize < 1 || basePage >= array.length \r\n            ? [] \r\n            : array.slice(basePage, basePage + pageSize );\r\n    }\r\n}\r\n\r\nexport default MockSearchDataProvider;"],"sourceRoot":"..\\..\\..\\src"}